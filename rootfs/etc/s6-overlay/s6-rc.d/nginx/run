#!/command/with-contenv bashio
# ==============================================================================
# Start nginx service
# ==============================================================================

bashio::log.info "Starting nginx..."

# Get config values for nginx
export SERVER_IP=$(bashio::config 'server_ip')
export SERVER_PORT=$(bashio::config 'server_port')

# Replace environment variables in nginx.conf
envsubst '$SERVER_IP $SERVER_PORT' < /etc/nginx/nginx.conf.template > /etc/nginx/nginx.conf

exec nginx -g "daemon off;"
